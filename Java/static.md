# static
자바 프로그래밍에서 성능을 향상시키는 방법은 여러 가지가 있다.
* 그 중에서 한 가지는 static을 사용하는 것

### static의 특징
자바에서 static으로 지정했다면, 해당 메서드나 변수는 정적이다.
* static이라는 단어는 ‘정적인. 움직이지 않는’이라는 의미
    * 반대는 dynamic
* 클래스 내부에 static으로 선언한 변수는 클래스 변수라고 한다.
* 클래스의 인스턴스를 여러개 생성하더라도 모든 객체가 해당 클래스 변수에 대해 동일한 주소의 값을 참조한다.

static 초기화 블록은 클래스 어느 곳에나 지정할 수 있다.
* static 블록은 클래스가 최초 로딩될 때 수행되므로 생성자 실행과 상관없이 수행
* 클래스 내부에 static 블록은 여러 번 사용할 수 있으며, static 블록은 순차적으로 읽혀진다.

static의 특징은 다른 JVM에서는 static이라고 선언해도 다른 주소나 다른 값을 참조
* 하나의 JVM이나 WAS 인스턴스에서는 같은 주소에 존재하는 값을 참조

GC의 대상이 되지 않는다.

### static 잘 활용하기
자주 사용하고 절대 변하지 않는 변수는 final static으로 선언하자
* 자주 사용되는 로그인 관련 쿼리들이나 간단한 목록 조회 쿼리를 final static으로 선언하면 적어도 1바이트 이상의 객체가 GC 대상에 포함되지 않는다.
* 간단한 코드성 데이터들을 static으로 선언해 놓으면 편리하다.
* 템플릿 성격의 객체를 static으로 선언하는 것도 성능 향상에 많은 도움이 된다.

설정 파일 정보도 static으로 관리하자
* 클래스의 객체를 생성할 때마다 설정 파일을 로딩하면 엄청난 성능 저하가 발생

코드성 데이터는 DB에서 한 번만 읽자
* 자주 바뀔 확률이 낮은 데이터이고 조회 빈도가 높은 코드성 데이터

### static과 메모리 릭
static으로 선언한 부분은 GC가 되지 않는다.
* Collection 객체를 static으로 선언하고 지속적으로 해당 객체에 데이터가 쌓인다면, 더 이상 GC가 되지 않으면서 OutOfMemoryError를 발생시킨다.
* 더 이상 사용 가능한 메모리가 없어지는 현상을 메모리 릭(Memory Leak)이라고 하는데, static과 Collection 객체를 잘못 사용하면 메모리 릭이 발생한다.
    * 메모리 릭이 발생했을 때 가장 크게 나타나는 현상은 사용 가능한 메모리가 적어지는 것
* 메모리릭의 원인은 메모리의 현재 상태를 (메모리의 단면을) 파일로 남기는 HeapDump라는 파일을 통해서 확인 가능하다.

참고 
* 자바 성능 튜닝 이야기