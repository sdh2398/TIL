# Single Sign On(SSO)
Web에서의 인증 방식의 하나이다.

### SSO가 필요한 이유
카카오톡, 페이스북, 넷플릭스 라는 세 가지 서비스를 사용한다고 했을 때, 세 개의 서비스는 각자의 방식으로 로그인을 요구한다. 또 세 어플리케이션이 로그인을 처리하는 방식, 사용자 정보를 저장하는 방식 또한 각자 다를 것이다.

그런데 만약 세 어플리케이션이 독립적으로 작동하기는 하지만 서로 연관된 무언가 있다고 했을 때(모두 같은 회사에서 제공하는 서비스 ex) 지메일, 구글 드라이브, 구글 행아웃 등) 각자 다른 아이디로 로그인을 해야 한다면, 아주 불편 할 것이다.
* 사용자 입장에서는 아이디, 비밀번호를 각각 세 개나 기억해야한다.
* 서비스 입장에서는 로그인 화면 세 개, DB 세 개, 로그인 프로세스 세 개를 각각 구현해야 한다.

### SSO란
위의 불편함을 해소할 수 있는 인증 방식이 SSO이다. 여러 서비스를 로그인 한 번으로 이용하도록 하는 기술이다. 각 애플리케이션에서 로그인/인증 부분만 떼어서 한 군데로 모아두는 방식이다.

예를 들어 지메일, 구글 드라이브, 구글 행아웃의 서비스가 있을 때 각각의 서비스를 SSO 용어로 SP(Service Provider) 라고 부른다. 그리고 각각의 SP에 사용하기 전 인증 관련 부분만 모아서 구현해 놓은 것을 Identity Provider(IdP)라고 부른다. 물론 이 IdP도 하나의 웹 서비스이다.

### SSO 동작 방식
구글 드라이브를 사용하는 시나리오는 다음과 같을 것이다.
1. 사용자가 SP(구글 드라이브)을 사용하려 한다.
2. 사용자의 세션 정보가 SP에 남아 있지 않아서 IdP(구글 통합 로그인 페이지)로 redirect 시킨다.
3. 사용자의 세션 정보가 IdP에 남아 있지 않아서, IdP에서 로그인을 한다.
4. 인증이 완료되면, IdP는 사용자를 SP로 redirect 시키며, 동시에 **인증 정보**를 SP에게 전달한다.
5. 로그인 처리가 완료 되어 구글 드라이브를 사용할 수 있다.

그리고 이 직후에, 지메일을 사용하면 사용자 흐름은 다음과 같은 것이다.
1. 사용자가 SP(지메일)을 사용하려 한다.
2. 사용자의 세션 정보가 SP에 남아 있지 않아서, SP는 사용자를 IdP로 redirect 시킨다.
3. 사용자의 세션 정보가 IdP에 남아 있다. 그러면 IdP는 사용자를 SP로 다시 redirect 시키며, 동시에 사용자의 **인증 정보**를 SP에게 전달한다.
4. 로그인 처리가 되어 지메일을 사용할 수 있게 된다.

구글 드라이브를 로그인한 사용자는 지메일에도 로그인 되어 있게 하는 것이다.

### SSO를 구현하는 법
SSO 시스템을 구현할 때의 가장 중요한 포인트는, IdP에서 SP로 사용자 인증 정보 전달을 처리할 때의 보안이다. 이 부분은 대표적으로 SAML, OAuth, JWT 등이 있다.

참고
* https://en.wikipedia.org/wiki/Single_sign-on
* https://hanee24.github.io/2018/08/04/sso/
